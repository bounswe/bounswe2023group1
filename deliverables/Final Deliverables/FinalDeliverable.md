# CMPE451 2023 - Final Project Deliverables

## Group Milestone Report

### Video Demonstration
- **Description:** Maximum of 5 minutes video showcasing the system with both web and mobile UIs.
- **Link:** [Video URL](#)

## Executive Summary
- **Project Status:** Summary of the project status in terms of requirements.

## Project Status Summary

### Functional Requirements

#### 1.1 User Requirements

- **1.1.1 User Registration**
  - 1.1.1.1 User Account Creation: `[COMPLETED]`
  - 1.1.1.2 Registration Confirmation and Login: `[COMPLETED]`
  - 1.1.1.3 Convenient Sign-In: `[NOT_STARTED]`
  - 1.1.1.4 Role Request and Emergent Functionalities: `[COMPLETED]`
  - 1.1.1.5 Emergent Roles: `[COMPLETED]`

- **1.1.2 User Roles**
  - Victim: `[COMPLETED]` (Except 1.1.2.1.8 `[IN PROGRESS]`)
  - Responder: Mostly `[COMPLETED]`, Some `[IN PROGRESS]`, 1.1.2.2.6 `[NOT STARTED]`
  - Facilitator: Mostly `[COMPLETED]`, Some `[IN PROGRESS]`, 1.1.2.3.8 & 1.1.2.3.9 `[NOT STARTED]`
  - Coordinator: Mostly `[COMPLETED]`, Some `[NOT STARTED]`
  - Administrator: `[NOT STARTED]`

- **1.1.3 Location Services**
  - Map and Location Sharing: `[COMPLETED]`

- **1.1.4 Information Filtering**
  - Filtering Information: `[COMPLETED]`

- **1.1.5 Disaster Reporting**
  - Reporting Disasters: `[COMPLETED]`

#### 1.2 System Requirements

- **1.2.1 Multi-hazard support**
  - Support for Various Disasters: `[NOT_STARTED]`

- **1.2.2 Multilingual Support**
  - Support for Multiple Languages: `[NOT STARTED]`

- **1.2.3 Resource Management**
  - Various sub-requirements: Mostly `[COMPLETED]`, Some `[IN PROGRESS]`

- **1.2.4 Actions**
  - Various sub-requirements: Mostly `[COMPLETED]`, 1.2.4.3.1 `[IN PROGRESS]`

- **1.2.5 Reporting**
  - Various reporting requirements: `[COMPLETED]`

- **1.2.7 Map-based operations**
  - Map Interface and Filtering: `[COMPLETED]`

### 2. Non-Functional Requirements

#### 2.1 Security and Privacy

- **2.1.1 Data Protection Regulations**
  - Compliance with Data Regulations: `[IN PROGRESS]`

- **2.1.2 Personal Information Protection**
  - Measures for Data Security: `[IN PROGRESS]`

### Status of Deliverables

| Deliverable                                               | Status          |
|-----------------------------------------------------------|-----------------|
| Group Milestone Report                                    | [Status]        |
| Video Demonstration of System                             | [Status]        |
| Executive Summary                                         | [Status]        |
| Summary of Project Status in Terms of Requirements        | `Completed`        |
| Final Release Notes                                       | [Status]        |
| Management Changes Description                            | [Status]        |
| Reflections on Final Milestone Demo                       | [Status]        |
| Progress Based on Teamwork                                | [Status]        |
| Summary of Work by Each Team Member (Tabular Format)      | [Status]        |
| API Endpoints Documentation and Examples                  | `Completed`        |
| User Interface / User Experience Design & Screenshots     | [Status]        |
| Annotations Status Description                            | [Status]        |
| Comprehensive Scenario Showcasing Core Functionalities    | [Status]        |
| Use and Maintenance Checks                                | [Status]        |
| User Manual                                               | [Status]        |
| System Manual                                             | [Status]        |
| Software Requirements Specification (SRS)                 | `Completed`        |
| Software Design Documents (UML)                           | [Status]        |
| User Scenarios and Mockups                                | `Completed`        |
| Project Plan                                              | `Completed`        |
| Unit Tests Reports                                        | `Completed`       |
| Software Dockerization and Deployment                     | [Status]        |
| Hostname/IPs for Web Application, API, and Annotation     | [Status]        |
| Final Software Release (Version 0.9.0)                    | [Status]        |
| Data for at Least 100 Realistic Posts (Database Dump)     | [Status]        |
| Individual Milestone Report                               | [Status]        |



## Final Release Notes

## Management

### Changes Implemented and Their Impact

- **Enhanced Communication:** Led to a cohesive team environment and faster problem resolution.
- **Code Review Process:** Significantly reduced bugs and improved code quality.
- **Proactive Risk Management:** Avoided potential delays and ensured smoother project progress.

### Reflections on Final Milestone Demo

#### Lessons Learned

1. **Early and Continuous Testing:** Key to identifying and fixing issues efficiently.
2. **Clear Communication:** Essential for aligning goals and addressing issues.
3. **Adaptability:** Crucial for success in a dynamic project environment.

#### Areas for Improvement

1. **Requirement Analysis:** More initial focus could have prevented mid-project course corrections.
2. **Time Management:** Better estimation needed for efficient project progression.
3. **Stakeholder Engagement:** More frequent engagement could have aligned the project closer to user needs.

## Progress Based on Teamwork

### Summary of Work by Team Members
| Team Member  | Work Performed                                     | Status    |
|--------------|----------------------------------------------------|-----------|
| Alperen Dagi | Writing Project Status Summary | Completed |
| Alperen Dagi | Creation of Status of Deliverables and Summary of Work Tables | Completed |
| Alperen Dagi | Creation of The Final Deliverables Report Template | Completed |
| Alperen Dagi | Implementation of Annotation Creation for Mobile  | Completed |
| Alperen Dagi | Implementation of Annotation Rendering for Mobile | Completed |
| Alperen Dagi | Implementing My Resources for Mobile               | Completed |
| Alperen Dagi | Milestone 2 Manual Testing Process for Mobile      | Completed |
| Alperen Dagi | Editing RAM Type and Documentation                 | Completed |
| Alperen Dagi | Debugging User Profile on Mobile                   | Completed |
| Alperen Dagi | Writing Test Plan for ML2 Report                   | Completed |
| Alperen Dagi | Implementing User Role Request for Mobile          | Completed |
| Alperen Dagi | Map-Based Resource and Requests Implementation     | Completed |
| Alperen Dagi | Logout Feature Implementation                      | Completed |
| Alperen Dagi | Debugging UserSessionManager for Mobile            | Completed |
| Alperen Dagi | Creation of Notification Screen for Mobile         | Completed |
| Alperen Dagi | Creating Guest View Map with Sign In/Up Options    | Completed |
| Alperen Dagi | Map Screen Implementation for Mobile               | Completed |
| Alperen Dagi | Developing User Case Scenario for Mobile App       | Completed |
| Alperen Dagi | Implementing Disaster Reporting for Mobile         | Completed |
| Alperen Dagi | Developing Main Page and Bottom Navigation Bar     | Completed |
| Alperen Dagi | Mobile Page Design                                 | Completed |
| Alperen Dagi | Reviewing Mockups for Mobile                       | Completed |
| Alperen Dagi | Learning Jetpack Compose for Mobile                | Completed |
| Alperen Dagi | Researching MVVM Architecture for Mobile           | Completed |
| Alperen Dagi | Developing Project Timeline for Mobile             | Completed |
| Alperen Dagi | Researching Tech Stack for Mobile                  | Completed |

*And so on for each team member*

## API Endpoints
- **Documentation:** [Link to API Documentation](https://api.resq.org.tr/resq/api/v1/swagger-ui/index.html#/action-controller/createAction)
- **Example Calls:**
  - Example 1: The most significant functionality of assigning tasks to the responders. It requires a sequence of calls to API. Creating task, adding resources to the task, adding actions to task by creating them, and adding requests to the task are crucial steps. By that way, matching requests and resources with actions become completed. There is an example flow of it.
  ```json
  task/createTask
  {
    "assignerId": 10,
    "assigneeId": 13, 
    "description": "Get resources from ankara to bursa ", 
    "urgency": "HIGH" 
  }
  ```

  ```json
  task/addRequestToTask
  {
    "taskId": 12,
    "requestIds": [
      2, 4
    ]
  }
  ```
  
  ```json
  task/createAction
  {
  "taskId": 12,
  "receiverId": 11,
  "resourceIds": [
    27, 28, 29
  ]
  }
  ```
  ```json
  action/createAction
  {
  "taskId": 12,
  "verifierId": 11,
  "description": "get resources from location X ",
  "startLatitude": 39.0,
  "startLongitude": 36.0,
  "endLatitude": 39.1,
  "endLongitude": 39.2,
  "dueDate": "2024-01-29T12:35:07.048Z",
  "completed": false,
  "verified": false
  }
  ```

  ```json
  task/viewSingleTask
  {
  "id": 12,
  "assignee": 13,
  "assigner": 10,
  "actions": [
    {
      "id": 25,
      "taskId": 12,
      "verifierId": 11,
      "description": "get resources from location X ",
      "startLatitude": 39,
      "startLongitude": 36,
      "endLatitude": 39.1,
      "endLongitude": 39.2,
      "dueDate": "2024-01-29T12:35:07.048",
      "createdDate": "2023-12-29T12:55:34.907508",
      "completed": false
    }
  ],
  "description": "Get resources from Ankara to Bursa",
  "resources": [
    {
      "id": 29,
      "senderId": 24,
      "receiverId": 11,
      "categoryTreeId": "84",
      "gender": "MALE",
      "quantity": 2,
      "latitude": 39.67,
      "longitude": 30.67,
      "createdDate": "2023-12-26T11:32:30.85713",
      "size": "XL",
      "file": null,
      "status": "IN_TASK"
    },
    {
      "id": 28,
      "senderId": 24,
      "receiverId": 11,
      "categoryTreeId": "64",
      "gender": "MALE",
      "quantity": 200,
      "latitude": 39.65,
      "longitude": 30.65,
      "createdDate": "2023-12-26T11:31:14.447966",
      "size": "XL",
      "file": null,
      "status": "IN_TASK"
    },
    {
      "id": 27,
      "senderId": 24,
      "receiverId": 11,
      "categoryTreeId": "70",
      "gender": "MALE",
      "quantity": 100,
      "latitude": 39.75,
      "longitude": 30.55,
      "createdDate": "2023-12-26T11:30:32.803294",
      "size": "XL",
      "file": null,
      "status": "IN_TASK"
    }
  ],
  "feedbacks": [],
  "urgency": "HIGH",
  "status": "PENDING",
  "createdDate": "2023-12-29T12:32:07.365487"
  }
  ```
   
  
    
  - Example 2: Another essential functionality is the need creation by the victims, those are the main focus of the application. Whole process aims to deliver their needs, according to specification they made. Response of the need creation call is the id of the created object.
    ```json
    need/createNeed
    {
    "description": "I've managed to send messages on social media, but I need a charging station for my phone. Any help available, perhaps with powerbanks or batteries?",
    "latitude": 40.43,
    "longitude": 29.2,
    "categoryTreeId": "50",
    "quantity": 2
    }
    ```
    ```json
    need/viewNeed
    {
    "id": 36,
    "userId": 12,
    "categoryTreeId": "50",
    "description": "I've managed to send messages on social media, but I need a charging station for my phone. Any help available, perhaps with powerbanks or batteries?",
    "quantity": 2,
    "latitude": 40.43,
    "longitude": 29.2,
    "requestId": null,
    "status": "NOT_INVOLVED",
    "createdDate": "2023-12-25T22:23:57.534262",
    "size": null
    }
    
    ```
  - Example 3: The application allows responders to create resources that they have. This request needs form-data type for file upload if user wants to upload an image of the resource. Response would be the id of the created need object
    ```json
    resource/creteResource
    {
    "senderId": 24,
    "categoryTreeId": "66",
    "quantity": 300,
    "latitude": 39.672,
     "longitude":   30.675, 
    "gender": "MALE",
    "size": null,
    "status": null
  
    }
    ```
    ```json
    created resource object
    {
    "id": 19,
    "senderId": 24,
    "receiverId": null,
    "categoryTreeId": "66",
    "gender": "MALE",
    "quantity": 300,
    "latitude": 39.672,
    "longitude": 20.675,
    "createdDate": "2023-12-29T13:42:03.374Z",
    "size": null,
    "file": null
    "status": "AVAILABLE"
    }
    ```
## User Interface / User Experience
- **Source Code Links:** [Link to Repository](#)
- **Screenshots:**
  - Web UI: ![Web UI Screenshot](#)
  - Mobile UI: ![Mobile UI Screenshot](#)

## Annotations
- **Status:** Description of the status of annotations in the project.
- **Standards Used:** Details of the standards implemented.

## Scenarios

- **Extensive Scenario:** Frontend
- The demonstration will follow the user story of Ahmet, a victim, and Ayşe, a responder offering some resources.

1. Ayşe is logging into the application to deliver her shopping for the victims at the disaster area. She brought 100 baby foods (resource- material resources) and wants to bring them to the resource gathering center so they can be delivered by a truck driver (another resource - human resource). She will start the demonstration in a logged-in state. She first navigates to the create resource page to create the resources she have in detail and she fills the resource address step with the information of the gathering center that she delivered the resources. Then, she chooses type of need which in this case is material resource and she types a part of what she is looking for (food) and it was recommended to her as baby food. So she founds the exact resource she was looking for. Then, she was able to add the quantity and the description of the resource she have. Afterwards, she navigates to the main page.And she can see her resource at list and map. 

2. Cem has previously logged into the application. Now, he finds himself on the main map page, where he sees different resources and disaster response centers which are defined with annotations such as category, short description, long description, date and location as longitude and latitude. There will be also metadata for annotation implementation of those centers. He then filters resources and annotations by type and opens the details of one of them. He then decides to create a request for some food for his family of four. Using the screens, he declares his family’s needs. He adds to the request that he has gluten intolerance and his wife has diabetes. Afterwards, he navigates to the own requests page in his profile to view his latest request and ensure he has written everything correctly. After a while, he refreshes to see a notification on the top that says a new sooıup kitchen near them.

- **Feature Completion:**
- **Victim:**
- Viewing resources on the map
- Creating request
- Viewing own requests
- **Responder:**
- Viewing assigned tasks on map and in list, accept or deny
- Creating resource
- Viewing own resources
- Notification page

- **Extensive Scenario:** Mobile
- Ahmet learned about the "ResQ" app from a friend and thought it could be helpful, especially since he lives in an earthquake-prone area. So, he downloaded the app on his phone.
When he opened the app, he had two choices on the login screen. Since he didn't have an account, he picked 'Create an account' and filled in his details, like email and password.
Ahmet didn't actively use the app since there wasn't any emergency, until one night an earthquake happened. Ahmet immediately opened the app. Once he signed in, he saw a map with pins showing where people needed help. Since Ahmet's building got damaged and it was dangerous to go inside, Ahmet needed food. He decided to add his own request for food.
Clicking on "Add Request" led him to a new screen. There, he chose 'Food' from a list and set his request priority to 'High' because he really needed help.
After making his request, Ahmet wanted to check his profile. On his "Victim User Profile," he found his name, birth date, and role as 'Victim.' There was also a list called 'My Requests' where he could see the request he just made.
Now, Ahmet waited, hopeful that someone would respond to his request. He knew there were kind people on the app always ready to help.
A few hours later, Ahmet got a notification. Someone nearby saw his request and was bringing him food. Feeling grateful, he was glad he used the "ResQ" app.

- **Feature Completion:**
- Settings page
- Notification page
- **Victim:**
- Viewing resources on the map
- Creating request
- Viewing own requests
- Resource creation for 


## Use and Maintenance
- **Verification:** Steps taken to assure manuals are correct.
- **Alternative Installation Tests:** Results from installing on different devices.

## Project Artifacts
### User Manual
- User creates an account via providing email&password to the system.
- System grants default "Victim" role to the user.
- User can login with his/her credentials to the system.
- The user can access services for which he has the required role.
### System Manual  
#### To deploy the backend of the application to the EC2 server, follow the instructions below
- First, clone the repository with command "git clone https://github.com/bounswe/bounswe2023group1"
- Place the config folders to the relevant places given below:
  - Place project_env and project_env_prod into the folder bounswe2023group1\resq\backend\resq
  - Place anno_env and anno_env_prod into the folder bounswe2023group1\resq\backend\annotation
  - Place deploy.sh, annoDeploy.sh and aws-key.pem to the outer folder which containts bounswe2023group1.
  - deploy.sh is a script file which builds the docker image of the resq service, pushes it to the remote repository, sshs into ec2, pulls the latest image, and runs it in the docker container of the ec2 instance.
  - annoDeploy.sh is a script file which builds the docker image of the annotation service, pushes it to the remote repository, sshs into ec2, pulls the latest image, and runs it in the docker container of the ec2 instance.
  - Note that, if IP addresses of ec2 instances change, you need to update the ssh command which includes ec2-user@<IP_ADDRESS>. Be careful that in case of ec2 instance stop & starts, IP addresses automatically change.

#### To access logs of the resq services in docker container of the ec2 instance
- ssh -i ./aws-key.pem ec2-user@<IP_ADDRESS>
- sudo docker ps
- sudo docker exec -it <container_name_or_id> /bin/bash
- cd ./config/resq/log
- tail -f resq (OR cat resq)

#### To access logs of the annotation services in docker container of the ec2 instance
- ssh -i ./aws-key.pem ec2-user@<IP_ADDRESS>
- sudo docker ps
- sudo docker exec -it <container_name_or_id> /bin/bash
- cd ./config/anno/log
- tail -f anno (OR cat anno)

#### To run both the backend and frontend apps on local machine
- cd bounswe2023group1\resq\backend
- run 'docker-compose up'
- Note that, when you are running the application on local machine, you need to update the API_BASE_URL located in AppService.js of the frontend app so that it sends the requests to the locally running backend:
const API_BASE_URL = 'http://localhost:8081'

### Software Requirements Specification (SRS)
- **Link:** [SRS Document](https://github.com/bounswe/bounswe2023group1/wiki/Requirements)

### Software Design Documents
- **UML Diagrams:** [Link to UML Diagrams](#)

### User Scenarios and Mockups
- **Link:** [Web Scenarios and Mockups](https://www.figma.com/file/LmUQJGetWO7oD8qCHAwtbl/ResQ?type=design&node-id=542-696&mode=design&t=JWeKr1kNmiTeMGDo-0)
- **Link:** [Mobile Scenarios and Mockups](https://www.figma.com/file/LmUQJGetWO7oD8qCHAwtbl/ResQ?type=design&node-id=597-4381&mode=design&t=yhSbiuwVEz51OnH2-0)

## Research
- **Project Plan:** [Link to Project Plan](https://github.com/bounswe/bounswe2023group1/wiki/Project-Plan-v2.0)

### Unit Tests Reports
- **Link:** [Unit Tests](https://github.com/bounswe/bounswe2023group1/wiki/Unit-Test-Report)

## Software
- **Deployment:** Dockerized and deployed software details.
- **Hostname/IPs:** Details of the web application, API, and annotation service.
- **Release Version:** 0.9.0
- **Release Description:** Group <X> CMPE451 2023 Fall Final Release
- **Tag Name:** final-submission-g<X>
- **Build Instructions:** [Docker Build Instructions](#)

### Data for Testing
- **Database Dump/Script:** [Link or Details](#)

### Individual Milestone Reports
- [Alperen Dağı](https://github.com/bounswe/bounswe2023group1/wiki/Alperen-Da%C4%9F%C4%B1-CMPE-451-Milestone-3-Individual-Contribution-Report)
- [Muhammet Ali Topcu](https://github.com/bounswe/bounswe2023group1/wiki/Muhammet-Ali-Topcu-CMPE-451-Final-Milestone-Individual-Contribution-Report)  
- [Harun Reşid Ergen](https://github.com/bounswe/bounswe2023group1/wiki/Harun-Re%C5%9Fid-Ergen-Final-Individual-Contribution-Report)
- [Çağrı Gülbeycan](https://github.com/bounswe/bounswe2023group1/wiki/%C3%87a%C4%9Fr%C4%B1-G%C3%BClbeycan-CMPE-451-Final-Deliverables-Individual-Contribution-Report)
- [Furkan Bülbül](https://github.com/bounswe/bounswe2023group1/wiki/Furkan-Bülbül-CMPE-451-Milestone-3-Individual-Contribution-Report)
- [Volkan Öztürk](https://github.com/bounswe/bounswe2023group1/wiki/Volkan-%C3%96zt%C3%BCrk-CMPE-451-Milestone-3-Individual-Contribution-Report)
